# From
# https://raw.githubusercontent.com/kubernetes/dashboard/refs/heads/release/7.11.1/charts/kubernetes-dashboard/values.yaml
# then removed settings I'm not changing.

kubernetes-dashboard:
  # Copyright 2017 The Kubernetes Authors.
  #
  # Licensed under the Apache License, Version 2.0 (the "License");
  # you may not use this file except in compliance with the License.
  # You may obtain a copy of the License at
  #
  # http://www.apache.org/licenses/LICENSE-2.0
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS,
  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  # See the License for the specific language governing permissions and
  # limitations under the License.

  # General configuration shared across resources
  app:
    settings:
      ## Global dashboard settings
      global:
        #  # Cluster name that appears in the browser window title if it is set
        clusterName: "tales"
        # Max number of items that can be displayed on each list page
        itemsPerPage: 40
        # Max number of labels that are displayed by default on most views.
        labelsLimit: 5
        # Namespace that should be selected by default after logging in.
        defaultNamespace: kube-system
        # List of namespaces that should be presented to user without namespace list privileges.
        namespaceFallbackList:
          - kube-system
      ## Pinned resources that will be displayed in dashboard's menu
      pinnedResources: []
      # - kind: customresourcedefinition
      #  #  Fully qualified name of a CRD
      #  name: prometheus.monitoring.coreos.com
      #  #  Display name
      #  displayName: Prometheus
      #  #  Is this CRD namespaced?
      #  namespaced: true
    ingress:
      enabled: true
      hosts:
        - tales.local.symmatree.com
        - dashboard.local.symmatree.com
      ingressClassName: cilium
      # This will append our Ingress with annotations required by our default configuration.
      #    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
      #    nginx.ingress.kubernetes.io/ssl-passthrough: "true"
      #    nginx.ingress.kubernetes.io/ssl-redirect: "true"
      useDefaultAnnotations: false
      pathType: ImplementationSpecific
      # If path is not the default (/), rewrite-target annotation will be added to the Ingress.
      # It allows serving Kubernetes Dashboard on a sub-path. Make sure that the configured path
      # does not conflict with gateway route configuration.
      path: /
      issuer:
        name: real-cert
        scope: cluster
      annotations:
        "ingress.cilium.io/tls-passthrough": enabled
    tolerations:
      - effect: NoSchedule
        key: node-role.kubernetes.io/control-plane
        operator: Exists
    affinity: {}

  ### Metrics Scraper
  ### Container to scrape, store, and retrieve a window of time from the Metrics Server.
  ### refs: https://github.com/kubernetes/dashboard/tree/master/modules/metrics-scraper
  metricsScraper:
    # TODO: Figure out how to get Prometheus instead.
    enabled: false

  metrics-server:
    enabled: false

  ## Required Kong sub-chart with DBless configuration to act as a gateway
  ## for our all containers.
  kong:
    enabled: true
    certificates:
      enabled: true
      clusterIssuer: real-cert

  cert-manager:
    enabled: false

  nginx:
    enabled: false

  extras:
    serviceMonitor:
      # Whether to create a Prometheus Operator service monitor.
      enabled: true
      # Here labels can be added to the serviceMonitor
      labels: {}
      # Here annotations can be added to the serviceMonitor
      annotations: {}
      # metrics.serviceMonitor.metricRelabelings Specify Metric Relabelings to add to the scrape endpoint
      # ref: https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
      metricRelabelings: []
      # metrics.serviceMonitor.relabelings [array] Prometheus relabeling rules
      relabelings: []
      # ServiceMonitor connection scheme. Defaults to HTTPS.
      scheme: https
